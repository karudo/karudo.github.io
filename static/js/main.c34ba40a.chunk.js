(this.webpackJsonpmastkloot=this.webpackJsonpmastkloot||[]).push([[0],{115:function(e,t,n){e.exports={app:"App_app__1tA9O"}},117:function(e,t,n){e.exports={blinkBox:"Floats_blinkBox__3QTgp",BlinkBoxKF:"Floats_BlinkBoxKF__Mdouj"}},122:function(e,t,n){e.exports={frame:"Frame_frame__35oTr"}},123:function(e,t,n){e.exports={rightSpace:"RightSpace_rightSpace__1OYG3"}},124:function(e,t,n){e.exports={menu:"length_menu__1k0_m"}},167:function(e,t,n){e.exports=n(203)},168:function(e,t,n){},169:function(e,t,n){},203:function(e,t,n){"use strict";n.r(t);n(168),n(169);var a=n(0),r=n.n(a),o=n(14),c=n.n(o),i=n(5),u=n(20),l=n(19),s=n(11),d=n(28),m=n(40),p=n(17);function f(e,t){return Object(p.isEqual)(e,t)}function v(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function h(e){var t=e.length-1;return[e.slice(0,t),e[t]]}var b=function(){function e(){Object(d.a)(this,e),this.map=new Map}return Object(m.a)(e,[{key:"get",value:function(e){return this.map.get(e)}},{key:"set",value:function(e,t){return this.map.set(e,t),this}},{key:"clear",value:function(){this.map.clear()}},{key:"delete",value:function(e){return this.map.delete(e)}}]),e}();var g=Object(l.b)({name:"global",initialState:{activity:{type:"components"},tabs:[]},reducers:{setActivity:function(e,t){var n=t.payload;e.activity=n},addNewTab:function(e,t){var n=t.payload;e.tabs.push(n)},updateTab:function(e,t){var n=Object(s.a)(t.payload,2),a=n[0],r=n[1];e.tabs.filter((function(e){return f(a,e.document)})).forEach((function(e){Object.assign(e,r)}))},removeTab:function(e,t){var n=t.payload;e.tabs=e.tabs.filter((function(e){return!f(n,e.document)}))}}}),y=function(e){return e.global.activity},E=function(e){return e.global.tabs},x=n(25),O=Symbol();function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t(e,n)!==O&&("component"===e.type||"tag"===e.type))for(var a in e.slots)for(var r=e.slots[a],o=r.length,c=0;c<o;++c)j(r[c],t,[].concat(Object(x.a)(n),[[a,c]]))}function C(e,t){var n=[];return j(e,(function(e){t(e)&&n.push(e)})),n}function k(e,t){for(var n=0;n<t.length;++n){var a=t[n];e=e.slots[a[0]][a[1]]}return e}function _(e){var t=function(e,t){var n=[];return j(e,(function(e){return n.push(t(e))})),n}(e,(function(e){return e.id}));return Object(p.max)(t)||0}function w(e,t,n){return{id:e++,type:"shadow",width:t,height:n}}function N(e,t){var n=w(e++,"100%","50px");return{id:e++,type:"tag",tag:t,style:{},slots:{children:[n]}}}function P(e,t){var n=C(t.template,(function(e){return"slot"===e.type})).map((function(t){return[t.code,[w(e++,t.width,t.height)]]})),a=Object.fromEntries(n);return{id:e++,type:"component",component:t.id,props:{},slots:a}}var S=n(29);function M(e){return Object(S.a)({document:{type:"component",id:""},activeNodePath:void 0,activeShadowContent:void 0,hoverNode:void 0,blinkAreas:[],iframeCoords:{left:0,top:0,width:0,height:0},contextMenu:void 0,refs:new b},e)}var I=0,B=Object(l.b)({name:"vars",initialState:M(),reducers:{merge:function(e,t){var n=t.payload;Object.assign(e,n)},setIframeCoords:function(e,t){var n=t.payload;e.iframeCoords=n},setActiveShadowContent:function(e,t){var n=t.payload;e.activeShadowContent=n},setActiveNode:function(e,t){var n=t.payload;e.activeNodePath=n},setHoverNode:function(e,t){var n=t.payload;e.hoverNode=n},setContextMenu:function(e,t){var n=t.payload;e.contextMenu=n},addBlinkArea:function(e,t){var n=t.payload;e.blinkAreas=[Object(S.a)({uid:I++},n)]},removeBlinkArea:function(e,t){var n=t.payload,a=e.blinkAreas.findIndex((function(e){return e.uid===n}));a>-1&&e.blinkAreas.splice(a,1)}}}),F=10,A={id:F++,type:"tag",tag:"div",style:{},slots:{children:[]}},T=Object(l.b)({name:"template",initialState:A,reducers:{replaceTemplate:function(e,t){return t.payload},replaceNode:function(e,t){var n=Object(s.a)(t.payload,2),a=n[0],r=n[1],o=h(a),c=Object(s.a)(o,2),i=c[0],u=Object(s.a)(c[1],2),l=u[0],d=u[1];k(e,i).slots[l][d]=r},insertNode:function(e,t){var n=Object(s.a)(t.payload,3),a=n[0],r=n[1],o=n[2],c=h(a),i=Object(s.a)(c,2),u=i[0],l=Object(s.a)(i[1],2),d=l[0],m=l[1];k(e,u).slots[d].splice(m+o,0,r)},removeNode:function(e,t){var n=h(t.payload),a=Object(s.a)(n,2),r=a[0],o=Object(s.a)(a[1],2),c=o[0],i=o[1];k(e,r).slots[c].splice(i,1)},setStyleProp:function(e,t){var n=Object(s.a)(t.payload,3),a=n[0],r=n[1],o=n[2];k(e,a).style[r]=o},setText:function(e,t){var n=Object(s.a)(t.payload,2),a=n[0],r=n[1];k(e,a).text=r}}}),H=Object(u.c)({template:T.reducer,vars:B.reducer}),R=function(e){return e.editor.template},D=function(e){return e.editor.vars.blinkAreas},L=function(e){return e.editor.vars.contextMenu},K=function(e){return e.editor.vars.refs};var W=Object(l.b)({name:"components",initialState:{components:[]},reducers:{setComponents:function(e,t){var n=t.payload;e.components=n}}}),U=Object(l.b)({name:"pages",initialState:{pages:[]},reducers:{setPages:function(e,t){var n=t.payload;e.pages=n}}}),z=Object(l.c)({serializableCheck:!1}),J=Object(l.a)({reducer:Object(u.c)({global:g.reducer,editor:H,pages:U.reducer,components:W.reducer}),middleware:z}),V=n(115),G=n.n(V),Y=n(3),q=n(24),Q=n.n(q),X=n(33),$=n(44),Z=n(43),ee=n(116),te=10,ne=[{id:"index",name:"index",template:{id:te++,type:"tag",tag:"div",style:{padding:"5%",backgroundColor:"#0FFFF0"},slots:{children:[{id:te++,type:"shadow",width:"100%",height:"350px"}]}}},{id:"about",name:"about",template:{id:te++,type:"tag",tag:"div",style:{padding:"5%",backgroundColor:"#0FFFF0"},slots:{children:[{id:te++,type:"shadow",width:"100%",height:"350px"}]}}}],ae=0,re=[{id:"foo",name:"foo",place:{width:"500px"},template:{id:ae++,type:"tag",tag:"div",style:{display:"flex"},slots:{children:[{id:ae++,type:"tag",tag:"div",style:{},slots:{children:[{id:ae++,type:"text",text:"hhh"}]}},{id:ae++,type:"tag",tag:"div",style:{minWidth:"300px"},slots:{children:[{id:ae++,type:"slot",code:"a-slot",width:"100%",height:"100px"}]}}]}}},{id:"bar",name:"bar",place:{width:"500px"},template:{id:ae++,type:"tag",tag:"div",style:{display:"flex",borderWidth:"1px",borderStyle:"dotted",borderColor:"black"},slots:{children:[{id:ae++,type:"tag",tag:"div",style:{minWidth:"350px"},slots:{children:[{id:ae++,type:"slot",code:"b-slot",width:"100%",height:"100px"}]}},{id:ae++,type:"tag",tag:"div",style:{},slots:{children:[{id:ae++,type:"text",text:"sss efhd ert rete a"}]}}]}}},{id:"tree",name:"qwe",place:{width:"500px"},template:{id:ae++,type:"tag",tag:"div",style:{padding:"15px",backgroundColor:"#ff0000"},slots:{children:[{id:ae++,type:"text",text:"hoba"}]}}}],oe=new(function(e){Object($.a)(n,e);var t=Object(Z.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this,"DataStore")).pages=void 0,e.components=void 0,e.version(1).stores({pages:"&id,name,template",components:"&id,name,template"}),e.on("populate",(function(){ne.forEach((function(t){return e.pages.add(t)})),re.forEach((function(t){return e.components.add(t)}))})),e.pages=e.table("pages"),e.components=e.table("components"),e}return n}(ee.a));function ce(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(X.a)(Q.a.mark((function e(t){var n,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("page"!==t.type){e.next=7;break}return e.next=3,oe.pages.get(t.id);case 3:return n=e.sent,e.abrupt("return",{template:n.template});case 7:return e.next=9,oe.components.get(t.id);case 9:return a=e.sent,e.abrupt("return",{template:a.template});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e,t){return function(n,a){Object(i.b)((function(){n(T.actions.replaceTemplate(e)),n(B.actions.merge(t))}))}}var le=g.actions,se=le.setActivity,de=le.addNewTab,me=le.updateTab,pe=le.removeTab;function fe(e){return function(){var t=Object(X.a)(Q.a.mark((function t(n,a){var r,o,c,u,l,s,d,m,v,h,b;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a(),o=r.global,c=o.tabs,u=o.activity,l=r.editor,s=l.template,d=l.vars,y=u,!("editor"===(g=e).type&&"editor"===y.type?f(g.document,y.document):f(g,y))){t.next=3;break}return t.abrupt("return");case 3:if(m=[],"editor"===u.type&&m.push(me([u.document,{template:s,vars:Object(p.omit)(d,["refs","blinkAreas"])}])),"editor"!==e.type){t.next=17;break}if(!(v=c.find((function(t){return f(t.document,e.document)})))){t.next=11;break}m.push(ue(v.template,v.vars)),t.next=17;break;case 11:return t.next=13,ce(e.document);case 13:h=t.sent,b=M({document:e.document}),m.push(ue(h.template,b)),m.push(de({document:e.document,template:h.template,vars:{}}));case 17:m.push(se(e)),Object(i.b)((function(){return m.forEach(n)}));case 19:case"end":return t.stop()}var g,y}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function ve(){return function(){var e=Object(X.a)(Q.a.mark((function e(t,n){var a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.pages.toArray();case 2:a=e.sent,t(U.actions.setPages(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function he(){return function(){var e=Object(X.a)(Q.a.mark((function e(t,n){var a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.components.toArray();case 2:a=e.sent,t(W.actions.setComponents(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}var be=n(117),ge=n.n(be),ye=r.a.memo((function(e){var t=e.area,n=Object(i.d)();return r.a.createElement("div",{className:ge.a.blinkBox,style:{animationIterationCount:t.count,left:t.box.left-1,top:t.box.top-1,width:t.box.width,height:t.box.height},onAnimationEnd:function(){return n(B.actions.removeBlinkArea(t.uid))}})})),Ee=r.a.memo((function(){return Object(i.e)(D).map((function(e){return r.a.createElement(ye,{area:e,key:e.uid})}))}));function xe(e){return function(t,n){Object(i.b)((function(){var a=k(n().editor.template,e);t(B.actions.setActiveNode(e)),"shadow"===a.type&&t(B.actions.setActiveShadowContent())}))}}function Oe(e,t){return function(n,a){var r,o=a(),c=o.editor.template,i=o.components,u=h(e),l=Object(s.a)(u,2),d=l[0],m=Object(s.a)(l[1],1)[0],p=k(c,d),f=_(c)+1;if("tag"===p.type&&(r=w(f,"100%","50px")),"component"===p.type){var v=C(i.components.find((function(e){return e.id===p.component})).template,(function(e){return"slot"===e.type&&e.code===m})),b=Object(s.a)(v,1)[0];r=w(f,b.width,b.height)}r&&n(T.actions.insertNode([e,r,t]))}}function je(e){return function(t,n){var a=n().editor,r=a.template,o=a.vars,c=o.iframeCoords,i=o.refs,u=k(r,e),l=i.get(u.id).getBoundingClientRect(),s={left:l.left+c.left,top:l.top+c.top,width:l.width,height:l.height};t(B.actions.addBlinkArea({count:.75,box:s}))}}function Ce(e,t,n,a,o){return r.a.createElement(Y.MenuItem,{icon:"add",text:t,key:a},r.a.createElement(Y.MenuItem,{icon:"add-row-top",text:"Begin",onClick:function(){return e(Oe([].concat(Object(x.a)(n),[[a,0]]),0))}}),r.a.createElement(Y.MenuItem,{icon:"add-row-bottom",text:"End",onClick:function(){return e(Oe([].concat(Object(x.a)(n),[[a,o.length]]),0))}}))}function ke(e){var t=e.path,n=e.useSelect,a=Object(i.d)(),o=function(e){return Object(i.e)((function(t){return k(t.editor.template,e)}))}(t);return o?r.a.createElement(Y.Menu,null,n&&r.a.createElement(Y.MenuItem,{icon:"select",text:"Select it",onClick:function(){return a(xe(t))}}),t.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.MenuItem,{icon:"double-chevron-up",text:"Add before",onClick:function(){return a(Oe(t,0))}}),r.a.createElement(Y.MenuItem,{icon:"double-chevron-down",text:"Add after",onClick:function(){return a(Oe(t,1))}})),"tag"===o.type&&Ce(a,"Add element",t,"children",o.slots.children),"component"===o.type&&Object.keys(o.slots).map((function(e){return Ce(a,"Add element to ".concat(e),t,e,o.slots[e])})),t.length>0&&r.a.createElement(Y.MenuItem,{icon:"delete",text:"Delete"},r.a.createElement(Y.MenuItem,{icon:"thumbs-up",text:"Yes",onClick:function(){return a(function(e){return function(t,n){Object(i.b)((function(){t(B.actions.setActiveNode()),t(T.actions.removeNode(e))}))}}(t))}}))):null}function _e(){var e=Object(i.f)(),t=Object(i.e)(L);return Object(a.useEffect)((function(){t&&Promise.resolve().then((function(){var n=t.left,a=t.top,o=t.path;Y.ContextMenu.show(r.a.createElement(i.a,{store:e},r.a.createElement(ke,{path:o})),{left:n,top:a},(function(){e.dispatch(B.actions.setContextMenu())}))}))}),[t,e]),null}var we=n(67),Ne=n.n(we),Pe=n(122),Se=n.n(Pe),Me=function(e){Object($.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o)))._isMounted=!1,e._isFirst=!0,e.node=r.a.createRef(),e.resizeObserver=new ResizeObserver((function(){e.dispatchCoords()})),e.handleLoad=function(){e.forceUpdate()},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0;var e,t=this.getDoc();"complete"===(null===t||void 0===t?void 0:t.readyState)?this.handleLoad():null===(e=this.node.current)||void 0===e||e.addEventListener("load",this.handleLoad);this.resizeObserver.observe(this.node.current)}},{key:"componentWillUnmount",value:function(){var e;this._isMounted=!1,null===(e=this.node.current)||void 0===e||e.removeEventListener("load",this.handleLoad),this.resizeObserver.disconnect()}},{key:"dispatchCoords",value:function(){var e=this.node.current.getBoundingClientRect();this.props.dispatch(B.actions.setIframeCoords(function(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}(e)))}},{key:"getDoc",value:function(){var e;return(null===(e=this.node.current)||void 0===e?void 0:e.contentDocument)||null}},{key:"renderFrameContents",value:function(){if(!this._isMounted)return null;var e=this.getDoc();return e?(this._isFirst&&(e.open("text/html","replace"),e.write('<!DOCTYPE html><html><head></head><body class="_frame_body"></body></html>'),e.close(),this._isFirst=!1),[c.a.createPortal(this.props.head,e.head),c.a.createPortal(this.props.content,e.body)]):null}},{key:"render",value:function(){return r.a.createElement("iframe",{ref:this.node,title:"huitle",className:Se.a.frame},this.renderFrameContents())}}]),n}(a.PureComponent),Ie=n(123),Be=n.n(Ie),Fe=n(68),Ae=n.n(Fe),Te=n(4),He=n.n(Te),Re=function(e){return e.editor.vars.activeShadowContent};function De(e){var t=e.item,n=Object(i.d)(),a=Object(i.e)(Re),o=(null===a||void 0===a?void 0:a[0])===t[0]&&a[1]===t[1],c=o?"Click to select":"Click to preview";return r.a.createElement(Y.Tooltip,{content:c},r.a.createElement(Y.Card,{interactive:!0,elevation:o?4:0,className:Ae.a.itemCard,onClick:function(){var e;n(o?function(e,t){var n,a=t(),r=a.editor,o=r.vars,c=r.template,u=a.components,l=o.activeNodePath,s=o.activeShadowContent,d=_(c)+1;if("slot"===s[0]&&(n=function(e){return{id:e,type:"slot",code:"code".concat(e),width:"100px",height:"100px"}}(d)),"tag"===s[0]&&(n=N(d,s[1])),"component"===s[0]){var m=u.components.find((function(e){return e.id===s[1]}));n=P(d,m)}Object(i.b)((function(){e(T.actions.replaceNode([l,n])),e(B.actions.setActiveShadowContent())}))}:(e=t,function(t,n){t(B.actions.setActiveShadowContent(e))}))}},r.a.createElement(Y.Callout,{className:He()(Ae.a.itemInner,o&&"bp3-intent-success")},"tag"===t[0]?"<":"%",t[1])))}var Le=[["slot"]],Ke=[["tag","div"]];function We(e){var t=e.node,n=Object(i.e)((function(e){return e.components.components})),o=Object(i.e)((function(e){return e.editor.vars})),c=Object(a.useMemo)((function(){var e="component"===o.document.type,t=e?n.filter((function(e){return e.id!==o.document.id})):n;return[].concat(Object(x.a)(e?Le:[]),Ke,Object(x.a)(t.map((function(e){return["component",e.id]}))))}),[n,o.document]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ae.a.grid},c.map((function(e){return r.a.createElement(De,{item:e,key:e.join(":")})}))),r.a.createElement("pre",null,JSON.stringify(t,null,2)))}var Ue=n(76),ze=n.n(Ue),Je=n(206),Ve=Object(p.keyBy)([{name:"color",type:"color",defaults:function(){return"#000000"}},{name:"backgroundColor",type:"color",defaults:function(){return"#FFFFFF"}},{name:"borderColor",type:"color",defaults:function(){return"#000000"}},{name:"borderStyle",type:"variant",variants:["solid","dotted","double"],defaults:function(){return"solid"}},{name:"borderWidth",type:"length",defaults:function(){return"1px"}},{name:"minWidth",type:"length",defaults:function(){return"100%"}},{name:"padding",type:"length",defaults:function(){return"0px"}},{name:"margin",type:"length",defaults:function(){return"0px"}},{name:"display",type:"variant",variants:["block","flex"],defaults:function(){return"block"}}],"name"),Ge=Object(p.sortBy)(Object.keys(Ve)),Ye=(Ge.length,n(77)),qe=n.n(Ye);var Qe=n(124),Xe=n.n(Qe),$e=["px","%"];var Ze=Je.a.ofType(),et=function(e,t){var n=t.handleClick,a=t.modifiers;return r.a.createElement(Y.MenuItem,{active:a.active,disabled:a.disabled,key:e,onClick:n,text:e})};var tt={color:function(e){var t=e.value,n=e.onChange;return r.a.createElement("input",{type:"color",value:t,onChange:function(e){return n(e.target.value)}})},length:function(e){var t=e.value,n=e.onChange,a=t.match(/^-?\d+/)[0],o=t.substring(a.length),c=r.a.createElement(Y.Popover,{content:r.a.createElement(Y.Menu,{className:Xe.a.menu},$e.map((function(e){return r.a.createElement(Y.MenuItem,{text:e,key:e,active:e===o,onClick:function(){return n("".concat(a).concat(e))}})}))),position:Y.Position.BOTTOM_RIGHT},r.a.createElement(Y.Button,{minimal:!0,rightIcon:"caret-down"},o));return r.a.createElement(Y.NumericInput,{value:a,onValueChange:function(e){return n("".concat(e).concat(o))},rightElement:c})},variant:function(e){var t=e.value,n=e.onChange,a=e.type;return r.a.createElement(Ze,{activeItem:t,items:a.variants,itemRenderer:et,onItemSelect:n,filterable:!1},r.a.createElement(Y.Button,{text:t,rightIcon:"caret-down"}))}},nt=r.a.memo((function(e){var t=e.propName,n=e.value,o=e.path,c=Object(i.d)(),u=Object(a.useCallback)((function(e){return c(T.actions.setStyleProp([o,t,e]))}),[c,o,t]),l=Ve[t];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:qe.a.cell},t),r.a.createElement("div",{className:qe.a.cell},r.a.createElement(tt[l.type],{value:n,onChange:u,type:l})))})),at=function(e,t){var n=t.handleClick,a=t.modifiers;return r.a.createElement(Y.MenuItem,{active:a.active,disabled:a.disabled,key:e,onClick:n,text:e})},rt=function(e,t){return!(e.length>0)||t.startsWith(e)},ot=Je.a.ofType();function ct(e){var t=e.tag,n=e.path,o=Object(i.d)(),c=Object(a.useMemo)((function(){return Object(p.sortBy)(Object.keys(t.style))}),[t.style]),u=Object(a.useMemo)((function(){return Object(p.difference)(Ge,c)}),[c]);return r.a.createElement(Y.Card,null,r.a.createElement("div",{className:ze.a.allProps},c.map((function(e){return r.a.createElement(nt,{propName:e,value:t.style[e],path:n,key:e})}))),u.length>0&&r.a.createElement("div",{className:ze.a.propSelect},r.a.createElement(ot,{activeItem:null,items:u,itemRenderer:at,itemPredicate:rt,onItemSelect:function(e){var t=Ve[e].defaults();o(T.actions.setStyleProp([n,e,t]))}},r.a.createElement(Y.Button,{text:"Add new prop",rightIcon:"caret-down"}))))}function it(e){var t=e.node,n=e.path;return r.a.createElement(r.a.Fragment,null,"tag"===t.type&&r.a.createElement(ct,{tag:t,path:n}))}function ut(e){var t=e.node,n=e.path;return r.a.createElement("div",null,r.a.createElement(it,{node:t,path:n}))}var lt=function(e){var t,n=e.editor.vars.activeNodePath;return n&&(t=k(e.editor.template,n)),{path:n,node:t}};function st(){var e,t=Object(i.e)(lt,i.c),n=t.path,a=t.node,o=Object(i.e)(R);switch(null===a||void 0===a?void 0:a.type){case"shadow":e=r.a.createElement(We,{node:a});break;case"slot":e=r.a.createElement("div",null,"slot ",a.code);break;case"text":e=r.a.createElement("div",null,"text &",a.text,"&");break;case"tag":e=r.a.createElement(ut,{node:a,path:n});break;case"component":e=r.a.createElement("div",null,"component ",a.component);break;default:e=r.a.createElement("div",null,"Select something")}return r.a.createElement("div",{className:Be.a.rightSpace},e,r.a.createElement("div",{style:{height:300}},r.a.createElement("pre",null,JSON.stringify(o,null,2))))}function dt(e,t){return".".concat(e," {").concat(Object(p.map)(t,(function(e,t){return"".concat(Object(p.kebabCase)(t),": ").concat(e,";")})).join("\n"),"}")}function mt(){for(var e=[],t=document.styleSheets,n=0;n<t.length;++n)for(var a=t[n],r=0;r<a.cssRules.length;++r){var o=a.cssRules[r];o instanceof CSSStyleRule&&o.selectorText.startsWith("._frame")&&e.push(o.cssText),o instanceof CSSKeyframesRule&&o.name.startsWith("_frame")&&e.push(o.cssText)}return[{id:"parent",style:e.join("\n")}]}var pt=r.a.memo((function(e){var t=e.styles;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement("style",{type:"text/css",key:e.id},e.style)})))})),ft=function(e){return"tag"===e.type&&Object.keys(e.style).length>0},vt=r.a.memo((function(e){var t=C(e.tree,ft).map((function(t){return{id:t.id,style:dt("".concat(e.prefix).concat(t.id),t.style)}}));return r.a.createElement(pt,{styles:t})})),ht=function(e){return e.components.components},bt=r.a.memo((function(){var e=Object(i.e)(ht);return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement(vt,{tree:e.template,prefix:"c".concat(e.id,"_"),key:e.id})})))})),gt=function(e){var t=e.tree,n=Object(a.useMemo)(mt,[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(pt,{styles:n}),r.a.createElement(vt,{tree:t,prefix:"t"}),r.a.createElement(bt,null))},yt=n(65);function Et(e){var t=function e(t){var n=t.parentNode;return function(e){var t,n=null===e||void 0===e||null===(t=e.defaultView)||void 0===t?void 0:t.HTMLDocument;return!!n&&e instanceof n}(n)?n:e(n)}(e),n=t.createTextNode("");e.appendChild(n);var a=t.activeElement===e;if(null!==n&&null!==n.nodeValue&&a){var r,o=null===(r=t.defaultView)||void 0===r?void 0:r.getSelection();if(o){var c=t.createRange();c.setStart(n,n.nodeValue.length),c.collapse(!0),o.removeAllRanges(),o.addRange(c)}e instanceof HTMLElement&&e.focus()}}var xt=function(e){Object($.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).lastHtml=e.props.html,e.getEl=function(){return e.props.attrs.ref.current},e.emitChange=function(t){var n=e.getEl();if(n){var a=n.innerHTML;e.props.onChange&&a!==e.lastHtml&&e.props.onChange(a),e.lastHtml=a}},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.attrs,n=e.html,a=Object(yt.a)(e,["attrs","html"]);return r.a.createElement("span",Object(S.a)(Object(S.a)({dangerouslySetInnerHTML:{__html:n},onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyUp:this.props.onKeyUp||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!0},a),t))}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=this.getEl();return!n||(e.html!==n.innerHTML||(t.className!==e.className||t.attrs!==e.attrs))}},{key:"componentDidUpdate",value:function(){var e=this.getEl();e&&(this.props.html!==e.innerHTML&&(e.innerHTML=this.props.html),this.lastHtml=this.props.html,Et(e))}}]),n}(r.a.Component);var Ot=[],jt=r.a.createContext([{},[],!1,""]),Ct=r.a.createContext(!0),kt=r.a.createContext(!1);function _t(e){var t=e.width,n=e.height,o=e.selected,c=e.attrs,i="_frame_slot";return Object(a.useContext)(Ct)&&(i+=o?" _frame_slot_waiting":" _frame_slot_active"),r.a.createElement("div",Object.assign({style:{width:t,height:n},className:i},c))}function wt(e){var t=e.name,n=e.attrs,a=N(-100,t);return r.a.createElement(Ct.Provider,{value:!1},r.a.createElement(St,{node:a,path:[["_",0]],classPrefix:"tmp",attrs:n}))}function Nt(e){var t=e.componentId,n=e.attrs,a=P(-1e3,Object(i.e)((function(e){return e.components.components.find((function(e){return e.id===t}))})));return r.a.createElement(Ct.Provider,{value:!1},r.a.createElement(Mt,{node:a,path:[["_",0]],classPrefix:"x",attrs:n}))}function Pt(e){var t=e.path,n=e.content,o=e.slotName,c=e.classPrefix,i=Object(a.useMemo)((function(){return n.map((function(e,n){return[].concat(Object(x.a)(t),[[o,n]])}))}),[n,t,o]);return r.a.createElement(r.a.Fragment,null,n.map((function(e,t){return r.a.createElement(Ft,{key:e.id,node:e,path:i[t],classPrefix:c})})))}function St(e){var t=e.node,n=e.path,o=e.classPrefix,c=e.attrs,i=Object(a.useContext)(kt);return r.a.createElement(t.tag,Object(S.a)({className:"".concat(o).concat(t.id)},c),r.a.createElement(kt.Provider,{value:i},r.a.createElement(Pt,{path:n,slotName:"children",content:t.slots.children,classPrefix:o})))}function Mt(e){var t=e.node,n=e.path,o=e.attrs,c=e.classPrefix,u=Object(i.e)((function(e){return e.components.components.find((function(e){return e.id===t.component}))})),l=Object(a.useContext)(kt),s=Object(a.useMemo)((function(){return[t.slots,n,l,c]}),[t.slots,n,l,c]);return r.a.createElement(jt.Provider,{value:s},r.a.createElement(At,{node:u.template,active:!1,classPrefix:"c".concat(u.id,"_"),attrs:o}))}function It(e){var t=e.node,n=Object(a.useContext)(jt),o=Object(s.a)(n,4),c=o[0],i=o[1],u=o[2],l=o[3],d=t.code,m=c[d];return r.a.createElement(kt.Provider,{value:u},r.a.createElement(Pt,{path:i,slotName:d,content:m,classPrefix:l}))}var Bt={text:function(e){var t=e.node,n=e.attrs,a=e.path,o=Object(i.d)();return n?r.a.createElement(xt,{attrs:n,html:t.text,onChange:function(e){return o(T.actions.setText([a,e]))}}):r.a.createElement(r.a.Fragment,null,t.text)},tag:St,component:Mt,slot:function(e){var t=e.node,n=e.attrs,o=Object(a.useContext)(kt);return Object(i.e)((function(e){return"component"===e.editor.vars.document.type}))&&o?r.a.createElement("div",Object.assign({className:"_frame_slot_component",style:{width:t.width,height:t.height}},n)):r.a.createElement(It,{node:t})},shadow:function(e){var t,n=e.node,a=e.path,o=e.attrs,c=Object(i.e)((function(e){return e.editor.vars})),u=c.activeNodePath,l=c.activeShadowContent,s=!!u&&function(e,t,n){if(e.length!==t.length)return!1;for(var a=0;a<e.length;++a)if(!n(e[a],t[a]))return!1;return!0}(u,a,v);return l&&s?("slot"===l[0]&&(t=r.a.createElement("div",{className:"_frame_slot_component",style:{width:"100px",height:"100px"}})),"tag"===l[0]&&(t=r.a.createElement(wt,{name:l[1],attrs:o})),"component"===l[0]&&(t=r.a.createElement(Nt,{componentId:l[1],attrs:o}))):t=r.a.createElement(_t,{width:n.width,height:n.height,selected:s,attrs:o}),r.a.createElement(kt.Provider,{value:!1},t)}},Ft=r.a.memo((function(e){var t=e.node,n=e.path,o=e.classPrefix,c=e.attrs,u=Object(i.d)(),l=Object(a.useRef)(),s=Object(a.useContext)(kt);!function(e,t,n){var r=Object(i.e)(K);Object(a.useLayoutEffect)((function(){if(t)return r.set(e,n.current),function(){r.delete(e)}}),[e,t,n,r])}(t.id,s,l);var d=Object(a.useMemo)((function(){return s?{ref:l,onClick:function(e){u(function(e,t,n){return function(t,a){e.stopPropagation(),t(xe(n))}}(e,0,n))},onContextMenu:function(e){u(function(e,t,n){return function(t,a){e.preventDefault(),e.stopPropagation(),t(B.actions.setContextMenu({path:n,left:e.clientX,top:e.clientY}))}}(e,0,n))},onMouseOver:function(e){u(function(e,t,n){return function(t,a){e.stopPropagation(),Object(i.b)((function(){t(B.actions.setHoverNode(n)),t(je(n))}))}}(e,0,n))},onMouseOut:function(e){u(function(e,t,n){return function(t,n){e.stopPropagation(),t(B.actions.setHoverNode())}}(e))}}:c}),[u,s,n,t,l,c]);return r.a.createElement(Bt[t.type],{node:t,path:n,classPrefix:o,attrs:d})}));function At(e){var t=e.node,n=e.active,a=e.classPrefix,o=e.attrs;return r.a.createElement(kt.Provider,{value:n},r.a.createElement(Ft,{key:"t-root",node:t,path:Ot,attrs:o,classPrefix:a}))}var Tt=r.a.memo((function(e){var t=e.tree;return r.a.createElement(At,{node:t,active:!0,classPrefix:"t"})})),Ht=n(78),Rt=n.n(Ht),Dt={shadow:"new-object",component:"box",tag:"double-chevron-left"};function Lt(e){return"tag"===e.type?"<".concat(e.tag," />"):"component"===e.type?e.component:e.type}function Kt(e){var t=e.item,n=e.path,a=Object(i.d)();return r.a.createElement(Y.Popover,{content:r.a.createElement(ke,{path:n,useSelect:!0}),interactionKind:Y.PopoverInteractionKind.CLICK},r.a.createElement("span",{onMouseOver:function(){return a(je(n))}},r.a.createElement(Y.Breadcrumb,Object.assign({},t,{className:Rt.a.breadCrumb}))))}var Wt=function(e){var t=e.path,n=Object(yt.a)(e,["path"]);return r.a.createElement(Kt,{item:n,path:t})},Ut=[],zt=function(e){var t=e.editor;return[t.template,t.vars.activeNodePath||Ut]};function Jt(){var e=Object(i.e)(zt,v),t=Object(s.a)(e,2),n=t[0],a=t[1],o=function(e,t){for(var n=[e],a=0;a<t.length;++a){var r=t[a];e=e.slots[r[0]][r[1]],n.push(e)}return n}(n,a).map((function(e,t){var n=a.slice(0,t);return{text:Lt(e),icon:Dt[e.type],path:n}}));return r.a.createElement("div",{className:Rt.a.bottom},r.a.createElement(Y.Breadcrumbs,{items:o,breadcrumbRenderer:Wt,currentBreadcrumbRenderer:Wt}))}function Vt(){var e=Object(i.e)(R),t=Object(i.d)();return r.a.createElement("div",{className:Ne.a.content},r.a.createElement("div",{className:Ne.a.center},r.a.createElement(Me,{head:r.a.createElement(gt,{tree:e}),content:r.a.createElement(Tt,{tree:e}),dispatch:t}),r.a.createElement(Jt,null)),r.a.createElement("div",{className:Ne.a.right},r.a.createElement(st,null)))}var Gt=n(79),Yt=n.n(Gt);function qt(){var e=Object(i.d)(),t=Object(i.e)((function(e){return e.components.components}));return r.a.createElement("div",{className:Yt.a.grid},t.map((function(t){return r.a.createElement(Y.Card,{interactive:!0,className:Yt.a.itemCard,key:t.id,onClick:function(){e(fe({type:"editor",document:{type:"component",id:t.id}}))}},t.name)})))}var Qt=n(80),Xt=n.n(Qt);function $t(){var e=Object(i.d)(),t=Object(i.e)((function(e){return e.pages.pages}));return r.a.createElement("div",{className:Xt.a.grid},t.map((function(t){return r.a.createElement(Y.Card,{interactive:!0,className:Xt.a.itemCard,key:t.id,onClick:function(){e(fe({type:"editor",document:{type:"page",id:t.id}}))}},t.name)})))}function Zt(e){switch(e.activity.type){case"components":return r.a.createElement(qt,null);case"pages":return r.a.createElement($t,null);case"editor":return r.a.createElement(Vt,null)}}var en=function(e){return[y(e),E(e)]},tn=function(){var e=Object(i.d)(),t=Object(i.e)(en,v),n=Object(s.a)(t,2),a=n[0],o=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bp3-dark ".concat(G.a.app)},r.a.createElement(Y.Navbar,null,r.a.createElement(Y.Navbar.Group,null,r.a.createElement(Y.Navbar.Heading,null,"Mastkloot"),r.a.createElement(Y.Navbar.Divider,null),r.a.createElement(Y.Button,{active:"pages"===a.type,minimal:!0,icon:"document",text:"Pages",onClick:function(){return e(fe({type:"pages"}))}}),r.a.createElement(Y.Button,{active:"components"===a.type,minimal:!0,icon:"box",text:"Components",onClick:function(){return e(fe({type:"components"}))}}),r.a.createElement(Y.Navbar.Divider,null),o.map((function(t){var n=t.document;return r.a.createElement(Y.Button,{minimal:!0,icon:"database",rightIcon:"cross",active:"editor"===a.type&&f(a.document,n),onClick:function(t){"cross"===t.target.parentNode.dataset.icon?e(function(e){return function(){var t=Object(X.a)(Q.a.mark((function t(n,a){var r;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("page"!==(r=a().global.tabs.find((function(t){return f(t.document,e)}))).document.type){t.next=6;break}return t.next=4,oe.pages.update(r.document.id,{template:r.template});case 4:return t.next=6,n(ve());case 6:if("component"!==r.document.type){t.next=11;break}return t.next=9,oe.components.update(r.document.id,{template:r.template});case 9:return t.next=11,n(he());case 11:Object(i.b)((function(){n(se({type:"pages"})),n(pe(r.document))}));case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(n)):e(fe({type:"editor",document:n}))},key:"".concat(n.type,":").concat(n.id)},n.id)})))),r.a.createElement(Zt,{activity:a})),r.a.createElement(_e,null),r.a.createElement(Ee,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));J.dispatch(ve()),J.dispatch(he()),c.a.render(r.a.createElement(i.a,{store:J},r.a.createElement(tn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},67:function(e,t,n){e.exports={content:"Editor_content__1Hy63",center:"Editor_center__12CWH",right:"Editor_right__2DHew"}},68:function(e,t,n){e.exports={grid:"SelectComponent_grid__2M5R2",itemCard:"SelectComponent_itemCard__29_BG",itemInner:"SelectComponent_itemInner__wDi-J"}},76:function(e,t,n){e.exports={allProps:"CSSPropsEditor_allProps__304z7",propSelect:"CSSPropsEditor_propSelect__3nU8i"}},77:function(e,t,n){e.exports={cell:"Prop_cell__381Ud"}},78:function(e,t,n){e.exports={bottom:"Bottom_bottom__3almA",breadCrumb:"Bottom_breadCrumb__13MV8"}},79:function(e,t,n){e.exports={grid:"Components_grid__2bbJK",itemCard:"Components_itemCard__Hy6rg"}},80:function(e,t,n){e.exports={grid:"Pages_grid__2KMC7",itemCard:"Pages_itemCard__1xHP8"}}},[[167,1,2]]]);
//# sourceMappingURL=main.c34ba40a.chunk.js.map