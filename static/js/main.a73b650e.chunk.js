(this.webpackJsonpmastkloot=this.webpackJsonpmastkloot||[]).push([[0],{116:function(e,t,n){e.exports={app:"App_app__1tA9O"}},118:function(e,t,n){e.exports={rightSpace:"RightSpace_rightSpace__1vYAr"}},119:function(e,t,n){e.exports={menu:"length_menu__1k0_m"}},124:function(e,t,n){e.exports={frame:"Frame_frame__7r65g"}},167:function(e,t,n){e.exports=n(203)},168:function(e,t,n){},169:function(e,t,n){},203:function(e,t,n){"use strict";n.r(t);n(168),n(169);var a=n(0),r=n.n(a),o=n(14),c=n.n(o),i=n(5),u=n(20),l=n(19),s=n(9),d=n(25),m=n(29),p=n(17);function f(e,t){return Object(p.isEqual)(e,t)}function v(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function h(e){var t=e.length-1;return[e.slice(0,t),e[t]]}var b=function(){function e(){Object(d.a)(this,e),this.map=new Map}return Object(m.a)(e,[{key:"get",value:function(e){return this.map.get(e)}},{key:"set",value:function(e,t){return this.map.set(e,t),this}},{key:"clear",value:function(){this.map.clear()}},{key:"delete",value:function(e){return this.map.delete(e)}}]),e}();function g(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}}var y=Object(l.b)({name:"global",initialState:{activity:{type:"components"},tabs:[]},reducers:{setActivity:function(e,t){var n=t.payload;e.activity=n},addNewTab:function(e,t){var n=t.payload;e.tabs.push(n)},updateTab:function(e,t){var n=Object(s.a)(t.payload,2),a=n[0],r=n[1];e.tabs.filter((function(e){return f(a,e.document)})).forEach((function(e){Object.assign(e,r)}))},removeTab:function(e,t){var n=t.payload;e.tabs=e.tabs.filter((function(e){return!f(n,e.document)}))}}}),E=function(e){return e.global.activity},O=function(e){return e.global.tabs},j=n(26),x=Symbol();function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t(e,n)!==x&&("component"===e.type||"tag"===e.type))for(var a in e.slots)for(var r=e.slots[a],o=r.length,c=0;c<o;++c)C(r[c],t,[].concat(Object(j.a)(n),[[a,c]]))}function k(e,t){var n=[];return C(e,(function(e){t(e)&&n.push(e)})),n}function _(e,t){for(var n=0;n<t.length;++n){var a=t[n];e=e.slots[a[0]][a[1]]}return e}function w(e){var t=function(e,t){var n=[];return C(e,(function(e){return n.push(t(e))})),n}(e,(function(e){return e.id}));return Object(p.max)(t)||0}function N(e,t,n){return{id:e++,type:"shadow",width:t,height:n}}function M(e,t){var n=N(e++,"100%","50px");return{id:e++,type:"tag",tag:t,style:{},slots:{children:[n]}}}function P(e,t){var n=k(t.template,(function(e){return"slot"===e.type})).map((function(t){return[t.code,[N(e++,t.width,t.height)]]})),a=Object.fromEntries(n);return{id:e++,type:"component",component:t.id,props:{},slots:a}}var S=n(35);function B(e){return Object(S.a)({document:{type:"component",id:""},activeNodePath:void 0,activeShadowContent:void 0,hoverNode:void 0,blinkAreas:[],mainCoords:{left:0,top:0,right:0,bottom:0,width:0,height:0},iframeCoords:{left:0,top:0,right:0,bottom:0,width:0,height:0},contextMenu:void 0,refs:new b},e)}var A=Object(l.b)({name:"vars",initialState:B(),reducers:{merge:function(e,t){var n=t.payload;Object.assign(e,n)},setIframeCoords:function(e,t){var n=t.payload;e.iframeCoords=n},setMainCoords:function(e,t){var n=t.payload;e.mainCoords=n},setActiveShadowContent:function(e,t){var n=t.payload;e.activeShadowContent=n},setActiveNode:function(e,t){var n=t.payload;e.activeNodePath=n},setHoverNode:function(e,t){var n=t.payload;e.hoverNode=n},setContextMenu:function(e,t){var n=t.payload;e.contextMenu=n},addBlinkArea:function(e,t){var n=Object(s.a)(t.payload,2),a=n[0],r=n[1];e.blinkAreas=[{uid:a,box:r}]},removeBlinkArea:function(e,t){var n=t.payload,a=e.blinkAreas.findIndex((function(e){return e.uid===n}));a>-1&&e.blinkAreas.splice(a,1)},removeAllBlinkAreas:function(e){e.blinkAreas=[]}}}),I=10,F={id:I++,type:"tag",tag:"div",style:{},slots:{children:[]}},T=Object(l.b)({name:"template",initialState:F,reducers:{replaceTemplate:function(e,t){return t.payload},replaceNode:function(e,t){var n=Object(s.a)(t.payload,2),a=n[0],r=n[1],o=h(a),c=Object(s.a)(o,2),i=c[0],u=Object(s.a)(c[1],2),l=u[0],d=u[1];_(e,i).slots[l][d]=r},insertNode:function(e,t){var n=Object(s.a)(t.payload,3),a=n[0],r=n[1],o=n[2],c=h(a),i=Object(s.a)(c,2),u=i[0],l=Object(s.a)(i[1],2),d=l[0],m=l[1];_(e,u).slots[d].splice(m+o,0,r)},removeNode:function(e,t){var n=h(t.payload),a=Object(s.a)(n,2),r=a[0],o=Object(s.a)(a[1],2),c=o[0],i=o[1];_(e,r).slots[c].splice(i,1)},setStyleProp:function(e,t){var n=Object(s.a)(t.payload,3),a=n[0],r=n[1],o=n[2];_(e,a).style[r]=o},setText:function(e,t){var n=Object(s.a)(t.payload,2),a=n[0],r=n[1];_(e,a).text=r}}}),H=Object(u.c)({template:T.reducer,vars:A.reducer}),R=function(e){return e.editor.template},L=function(e){var t=e.editor.vars.activeNodePath;if(t)return{path:t,node:_(e.editor.template,t)}},D=function(e){return e.editor.vars.mainCoords},K=function(e){return e.editor.vars.iframeCoords},W=function(e){return e.editor.vars.contextMenu},U=function(e){return e.editor.vars.refs};var z=Object(l.b)({name:"components",initialState:{components:[]},reducers:{setComponents:function(e,t){var n=t.payload;e.components=n}}}),V=Object(l.b)({name:"pages",initialState:{pages:[]},reducers:{setPages:function(e,t){var n=t.payload;e.pages=n}}}),J=Object(l.c)({serializableCheck:!1}),Y=Object(l.a)({reducer:Object(u.c)({global:y.reducer,editor:H,pages:V.reducer,components:z.reducer}),middleware:J}),G=n(116),q=n.n(G),Q=n(3),X=n(24),$=n.n(X),Z=n(36),ee=n(31),te=n(30),ne=n(117),ae=10,re=[{id:"index",name:"index",template:{id:ae++,type:"tag",tag:"div",style:{padding:"5%",backgroundColor:"#0FFFF0"},slots:{children:[{id:ae++,type:"shadow",width:"100%",height:"350px"}]}}},{id:"about",name:"about",template:{id:ae++,type:"tag",tag:"div",style:{padding:"5%",backgroundColor:"#0FFFF0"},slots:{children:[{id:ae++,type:"shadow",width:"100%",height:"350px"}]}}}],oe=0,ce=[{id:"foo",name:"foo",place:{width:"500px"},template:{id:oe++,type:"tag",tag:"div",style:{display:"flex"},slots:{children:[{id:oe++,type:"tag",tag:"div",style:{},slots:{children:[{id:oe++,type:"text",text:"hhh"}]}},{id:oe++,type:"tag",tag:"div",style:{minWidth:"300px"},slots:{children:[{id:oe++,type:"slot",code:"a-slot",width:"100%",height:"100px"}]}}]}}},{id:"bar",name:"bar",place:{width:"500px"},template:{id:oe++,type:"tag",tag:"div",style:{display:"flex",borderWidth:"1px",borderStyle:"dotted",borderColor:"black"},slots:{children:[{id:oe++,type:"tag",tag:"div",style:{minWidth:"350px"},slots:{children:[{id:oe++,type:"slot",code:"b-slot",width:"100%",height:"100px"}]}},{id:oe++,type:"tag",tag:"div",style:{},slots:{children:[{id:oe++,type:"text",text:"sss efhd ert rete a"}]}}]}}},{id:"tree",name:"qwe",place:{width:"500px"},template:{id:oe++,type:"tag",tag:"div",style:{padding:"15px",backgroundColor:"#ff0000"},slots:{children:[{id:oe++,type:"text",text:"hoba"}]}}}],ie=new(function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this,"DataStore")).pages=void 0,e.components=void 0,e.version(1).stores({pages:"&id,name,template",components:"&id,name,template"}),e.on("populate",(function(){re.forEach((function(t){return e.pages.add(t)})),ce.forEach((function(t){return e.components.add(t)}))})),e.pages=e.table("pages"),e.components=e.table("components"),e}return n}(ne.a));function ue(e){return le.apply(this,arguments)}function le(){return(le=Object(Z.a)($.a.mark((function e(t){var n,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("page"!==t.type){e.next=7;break}return e.next=3,ie.pages.get(t.id);case 3:return n=e.sent,e.abrupt("return",{template:n.template});case 7:return e.next=9,ie.components.get(t.id);case 9:return a=e.sent,e.abrupt("return",{template:a.template});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t){return function(n,a){Object(i.b)((function(){n(T.actions.replaceTemplate(e)),n(A.actions.merge(t))}))}}var de=y.actions,me=de.setActivity,pe=de.addNewTab,fe=de.updateTab,ve=de.removeTab;function he(e){return function(){var t=Object(Z.a)($.a.mark((function t(n,a){var r,o,c,u,l,s,d,m,v,h,b;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a(),o=r.global,c=o.tabs,u=o.activity,l=r.editor,s=l.template,d=l.vars,y=u,!("editor"===(g=e).type&&"editor"===y.type?f(g.document,y.document):f(g,y))){t.next=3;break}return t.abrupt("return");case 3:if(m=[],"editor"===u.type&&m.push(fe([u.document,{template:s,vars:Object(p.pick)(d,["document"])}])),"editor"!==e.type){t.next=17;break}if(!(v=c.find((function(t){return f(t.document,e.document)})))){t.next=11;break}m.push(se(v.template,B(v.vars))),t.next=17;break;case 11:return t.next=13,ue(e.document);case 13:h=t.sent,b=B({document:e.document}),m.push(se(h.template,b)),m.push(pe({document:e.document,template:h.template,vars:{}}));case 17:m.push(me(e)),Object(i.b)((function(){return m.forEach(n)}));case 19:case"end":return t.stop()}var g,y}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function be(){return function(){var e=Object(Z.a)($.a.mark((function e(t,n){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.pages.toArray();case 2:a=e.sent,t(V.actions.setPages(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function ge(){return function(){var e=Object(Z.a)($.a.mark((function e(t,n){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.components.toArray();case 2:a=e.sent,t(z.actions.setComponents(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}var ye=n(45),Ee=n.n(ye),Oe=n(4),je=n.n(Oe),xe=n(118),Ce=n.n(xe),ke=n(74),_e=n.n(ke),we=n(206),Ne=Object(p.keyBy)([{name:"color",type:"color",defaults:function(){return"#000000"}},{name:"backgroundColor",type:"color",defaults:function(){return"#FFFFFF"}},{name:"borderColor",type:"color",defaults:function(){return"#000000"}},{name:"borderStyle",type:"variant",variants:["solid","dotted","double"],defaults:function(){return"solid"}},{name:"borderWidth",type:"length",defaults:function(){return"1px"}},{name:"minWidth",type:"length",defaults:function(){return"100%"}},{name:"padding",type:"length",defaults:function(){return"0px"}},{name:"margin",type:"length",defaults:function(){return"0px"}},{name:"display",type:"variant",variants:["block","flex"],defaults:function(){return"block"}}],"name"),Me=Object(p.sortBy)(Object.keys(Ne)),Pe=(Me.length,n(75)),Se=n.n(Pe);var Be=n(119),Ae=n.n(Be),Ie=["px","%"];var Fe=we.a.ofType(),Te=function(e,t){var n=t.handleClick,a=t.modifiers;return r.a.createElement(Q.MenuItem,{active:a.active,disabled:a.disabled,key:e,onClick:n,text:e})};var He={color:function(e){var t=e.value,n=e.onChange;return r.a.createElement("input",{type:"color",value:t,onChange:function(e){return n(e.target.value)}})},length:function(e){var t=e.value,n=e.onChange,a=t.match(/^-?\d+/)[0],o=t.substring(a.length),c=r.a.createElement(Q.Popover,{content:r.a.createElement(Q.Menu,{className:Ae.a.menu},Ie.map((function(e){return r.a.createElement(Q.MenuItem,{text:e,key:e,active:e===o,onClick:function(){return n("".concat(a).concat(e))}})}))),position:Q.Position.BOTTOM_RIGHT},r.a.createElement(Q.Button,{minimal:!0,rightIcon:"caret-down"},o));return r.a.createElement(Q.NumericInput,{value:a,onValueChange:function(e){return n("".concat(e).concat(o))},rightElement:c})},variant:function(e){var t=e.value,n=e.onChange,a=e.type;return r.a.createElement(Fe,{activeItem:t,items:a.variants,itemRenderer:Te,onItemSelect:n,filterable:!1},r.a.createElement(Q.Button,{text:t,rightIcon:"caret-down"}))}},Re=r.a.memo((function(e){var t=e.propName,n=e.value,o=e.path,c=Object(i.d)(),u=Object(a.useCallback)((function(e){return c(T.actions.setStyleProp([o,t,e]))}),[c,o,t]),l=Ne[t];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Se.a.cell},t),r.a.createElement("div",{className:Se.a.cell},r.a.createElement(He[l.type],{value:n,onChange:u,type:l})))})),Le=function(e,t){var n=t.handleClick,a=t.modifiers;return r.a.createElement(Q.MenuItem,{active:a.active,disabled:a.disabled,key:e,onClick:n,text:e})},De=function(e,t){return!(e.length>0)||t.startsWith(e)},Ke=we.a.ofType();function We(e){var t=e.tag,n=e.path,o=Object(i.d)(),c=Object(a.useMemo)((function(){return Object(p.sortBy)(Object.keys(t.style))}),[t.style]),u=Object(a.useMemo)((function(){return Object(p.difference)(Me,c)}),[c]);return r.a.createElement(Q.Card,null,r.a.createElement("div",{className:_e.a.allProps},c.map((function(e){return r.a.createElement(Re,{propName:e,value:t.style[e],path:n,key:e})}))),u.length>0&&r.a.createElement("div",{className:_e.a.propSelect},r.a.createElement(Ke,{activeItem:null,items:u,itemRenderer:Le,itemPredicate:De,onItemSelect:function(e){var t=Ne[e].defaults();o(T.actions.setStyleProp([n,e,t]))}},r.a.createElement(Q.Button,{text:"Add new prop",rightIcon:"caret-down"}))))}function Ue(e){var t=e.node,n=e.path;return r.a.createElement(r.a.Fragment,null,"tag"===t.type&&r.a.createElement(We,{tag:t,path:n}))}function ze(e){var t=e.node,n=e.path;return r.a.createElement("div",null,r.a.createElement(Ue,{node:t,path:n}))}function Ve(){var e,t=Object(i.e)(L,i.c),n=Object(i.e)(R);if(t){var a=t.node,o=t.path;switch(a.type){case"shadow":e=r.a.createElement("div",null,"shadow");break;case"slot":e=r.a.createElement("div",null,"slot ",a.code);break;case"text":e=r.a.createElement("div",null,"text &",a.text,"&");break;case"tag":e=r.a.createElement(ze,{node:a,path:o});break;case"component":e=r.a.createElement("div",null,"component ",a.component);break;default:e=r.a.createElement("div",null,"Select something")}}return r.a.createElement("div",{className:Ce.a.rightSpace},e,r.a.createElement("div",{style:{height:300}},r.a.createElement("pre",null,JSON.stringify(n,null,2))))}function Je(e,t){return".".concat(e," {").concat(Object(p.map)(t,(function(e,t){return"".concat(Object(p.kebabCase)(t),": ").concat(e,";")})).join("\n"),"}")}function Ye(){for(var e=[],t=document.styleSheets,n=0;n<t.length;++n)for(var a=t[n],r=0;r<a.cssRules.length;++r){var o=a.cssRules[r];o instanceof CSSStyleRule&&o.selectorText.startsWith("._frame")&&e.push(o.cssText),o instanceof CSSKeyframesRule&&o.name.startsWith("_frame")&&e.push(o.cssText)}return[{id:"parent",style:e.join("\n")}]}var Ge=r.a.memo((function(e){var t=e.styles;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement("style",{type:"text/css",key:e.id},e.style)})))})),qe=function(e){return"tag"===e.type&&Object.keys(e.style).length>0},Qe=r.a.memo((function(e){var t=k(e.tree,qe).map((function(t){return{id:t.id,style:Je("".concat(e.prefix).concat(t.id),t.style)}}));return r.a.createElement(Ge,{styles:t})})),Xe=function(e){return e.components.components},$e=r.a.memo((function(){var e=Object(i.e)(Xe);return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement(Qe,{tree:e.template,prefix:"c".concat(e.id,"_"),key:e.id})})))})),Ze=function(e){var t=e.tree,n=Object(a.useMemo)(Ye,[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge,{styles:n}),r.a.createElement(Qe,{tree:t,prefix:"t"}),r.a.createElement($e,null))},et=n(67);function tt(e){var t=function e(t){var n=t.parentNode;return function(e){var t,n=null===e||void 0===e||null===(t=e.defaultView)||void 0===t?void 0:t.HTMLDocument;return!!n&&e instanceof n}(n)?n:e(n)}(e),n=t.createTextNode("");e.appendChild(n);var a=t.activeElement===e;if(null!==n&&null!==n.nodeValue&&a){var r,o=null===(r=t.defaultView)||void 0===r?void 0:r.getSelection();if(o){var c=t.createRange();c.setStart(n,n.nodeValue.length),c.collapse(!0),o.removeAllRanges(),o.addRange(c)}e instanceof HTMLElement&&e.focus()}}var nt=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).lastHtml=e.props.html,e.getEl=function(){return e.props.attrs.ref.current},e.emitChange=function(t){var n=e.getEl();if(n){var a=n.innerHTML;e.props.onChange&&a!==e.lastHtml&&e.props.onChange(a),e.lastHtml=a}},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.attrs,n=e.html,a=Object(et.a)(e,["attrs","html"]);return r.a.createElement("span",Object(S.a)(Object(S.a)({dangerouslySetInnerHTML:{__html:n},onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyUp:this.props.onKeyUp||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!0},a),t))}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=this.getEl();return!n||(e.html!==n.innerHTML||(t.className!==e.className||t.attrs!==e.attrs))}},{key:"componentDidUpdate",value:function(){var e=this.getEl();e&&(this.props.html!==e.innerHTML&&(e.innerHTML=this.props.html),this.lastHtml=this.props.html,tt(e))}}]),n}(r.a.Component);function at(e){return function(t,n){Object(i.b)((function(){var a=_(n().editor.template,e);t(A.actions.setActiveNode(e)),"shadow"===a.type&&t(A.actions.setActiveShadowContent())}))}}function rt(e,t){return function(n,a){var r,o=a(),c=o.editor.template,i=o.components,u=h(e),l=Object(s.a)(u,2),d=l[0],m=Object(s.a)(l[1],1)[0],p=_(c,d),f=w(c)+1;if("tag"===p.type&&(r=N(f,"100%","50px")),"component"===p.type){var v=k(i.components.find((function(e){return e.id===p.component})).template,(function(e){return"slot"===e.type&&e.code===m})),b=Object(s.a)(v,1)[0];r=N(f,b.width,b.height)}r&&n(T.actions.insertNode([e,r,t]))}}function ot(e){return function(t,n){var a=n().editor,r=a.template,o=a.vars.refs,c=_(r,e),i=o.get(c.id).getBoundingClientRect();t(A.actions.addBlinkArea([c.id,g(i)])),setTimeout((function(){return t(A.actions.removeBlinkArea(c.id))}),3e3)}}var ct=[],it=r.a.createContext([{},[],!1,""]),ut=r.a.createContext(!0),lt=r.a.createContext(!1);function st(e){var t=e.width,n=e.height,o=e.selected,c=e.attrs,i="_frame_slot";return Object(a.useContext)(ut)&&(i+=o?" _frame_slot_waiting":" _frame_slot_active"),r.a.createElement("div",Object.assign({style:{width:t,height:n},className:i},c))}function dt(e){var t=e.name,n=e.attrs,a=M(-100,t);return r.a.createElement(ut.Provider,{value:!1},r.a.createElement(ft,{node:a,path:[["_",0]],classPrefix:"tmp",attrs:n}))}function mt(e){var t=e.componentId,n=e.attrs,a=P(-1e3,Object(i.e)((function(e){return e.components.components.find((function(e){return e.id===t}))})));return r.a.createElement(ut.Provider,{value:!1},r.a.createElement(vt,{node:a,path:[["_",0]],classPrefix:"x",attrs:n}))}function pt(e){var t=e.path,n=e.content,o=e.slotName,c=e.classPrefix,i=Object(a.useMemo)((function(){return n.map((function(e,n){return[].concat(Object(j.a)(t),[[o,n]])}))}),[n,t,o]);return r.a.createElement(r.a.Fragment,null,n.map((function(e,t){return r.a.createElement(gt,{key:e.id,node:e,path:i[t],classPrefix:c})})))}function ft(e){var t=e.node,n=e.path,o=e.classPrefix,c=e.attrs,i=Object(a.useContext)(lt);return r.a.createElement(t.tag,Object(S.a)({className:"".concat(o).concat(t.id)},c),r.a.createElement(lt.Provider,{value:i},r.a.createElement(pt,{path:n,slotName:"children",content:t.slots.children,classPrefix:o})))}function vt(e){var t=e.node,n=e.path,o=e.attrs,c=e.classPrefix,u=Object(i.e)((function(e){return e.components.components.find((function(e){return e.id===t.component}))})),l=Object(a.useContext)(lt),s=Object(a.useMemo)((function(){return[t.slots,n,l,c]}),[t.slots,n,l,c]);return r.a.createElement(it.Provider,{value:s},r.a.createElement(yt,{node:u.template,active:!1,classPrefix:"c".concat(u.id,"_"),attrs:o}))}function ht(e){var t=e.node,n=Object(a.useContext)(it),o=Object(s.a)(n,4),c=o[0],i=o[1],u=o[2],l=o[3],d=t.code,m=c[d];return r.a.createElement(lt.Provider,{value:u},r.a.createElement(pt,{path:i,slotName:d,content:m,classPrefix:l}))}var bt={text:function(e){var t=e.node,n=e.attrs,a=e.path,o=Object(i.d)();return n?r.a.createElement(nt,{attrs:n,html:t.text,onChange:function(e){return o(T.actions.setText([a,e]))}}):r.a.createElement(r.a.Fragment,null,t.text)},tag:ft,component:vt,slot:function(e){var t=e.node,n=e.attrs,o=Object(a.useContext)(lt);return Object(i.e)((function(e){return"component"===e.editor.vars.document.type}))&&o?r.a.createElement("div",Object.assign({className:"_frame_slot_component",style:{width:t.width,height:t.height}},n)):r.a.createElement(ht,{node:t})},shadow:function(e){var t,n=e.node,a=e.path,o=e.attrs,c=Object(i.e)((function(e){return e.editor.vars})),u=c.activeNodePath,l=c.activeShadowContent,s=!!u&&function(e,t,n){if(e.length!==t.length)return!1;for(var a=0;a<e.length;++a)if(!n(e[a],t[a]))return!1;return!0}(u,a,v);return l&&s?("slot"===l[0]&&(t=r.a.createElement("div",{className:"_frame_slot_component",style:{width:"100px",height:"100px"}})),"tag"===l[0]&&(t=r.a.createElement(dt,{name:l[1],attrs:o})),"component"===l[0]&&(t=r.a.createElement(mt,{componentId:l[1],attrs:o}))):t=r.a.createElement(st,{width:n.width,height:n.height,selected:s,attrs:o}),r.a.createElement(lt.Provider,{value:!1},t)}},gt=r.a.memo((function(e){var t=e.node,n=e.path,o=e.classPrefix,c=e.attrs,u=Object(i.d)(),l=Object(a.useRef)(),s=Object(a.useContext)(lt);!function(e,t,n){var r=Object(i.e)(U);Object(a.useLayoutEffect)((function(){if(t)return r.set(e,n.current),function(){r.delete(e)}}),[e,t,n,r])}(t.id,s,l);var d=Object(a.useMemo)((function(){return s?{ref:l,onClick:function(e){u(function(e,t,n){return function(t,a){e.stopPropagation(),t(at(n))}}(e,0,n))},onContextMenu:function(e){u(function(e,t,n){return function(t,a){e.preventDefault(),e.stopPropagation(),t(A.actions.setContextMenu({path:n,left:e.clientX,top:e.clientY}))}}(e,0,n))},onMouseOver:function(e){u(function(e,t,n){return function(t,a){e.stopPropagation(),Object(i.b)((function(){t(A.actions.setHoverNode(n)),t(ot(n))}))}}(e,0,n))},onMouseOut:function(e){u(function(e,t,n){return function(t,n){e.stopPropagation(),t(A.actions.setHoverNode())}}(e))}}:c}),[u,s,n,t,l,c]);return r.a.createElement(bt[t.type],{node:t,path:n,classPrefix:o,attrs:d})}));function yt(e){var t=e.node,n=e.active,a=e.classPrefix,o=e.attrs;return r.a.createElement(lt.Provider,{value:n},r.a.createElement(gt,{key:"t-root",node:t,path:ct,attrs:o,classPrefix:a}))}var Et=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){console.log(111)}},{key:"render",value:function(){return r.a.createElement(yt,{node:this.props.tree,active:!0,classPrefix:"t"})}}]),n}(r.a.Component),Ot=n(78),jt=n.n(Ot);function xt(e,t,n,a,o){return r.a.createElement(Q.MenuItem,{icon:"add",text:t,key:a},r.a.createElement(Q.MenuItem,{icon:"add-row-top",text:"Begin",onClick:function(){return e(rt([].concat(Object(j.a)(n),[[a,0]]),0))}}),r.a.createElement(Q.MenuItem,{icon:"add-row-bottom",text:"End",onClick:function(){return e(rt([].concat(Object(j.a)(n),[[a,o.length]]),0))}}))}function Ct(e){var t=e.path,n=e.useSelect,a=Object(i.d)(),o=function(e){return Object(i.e)((function(t){return _(t.editor.template,e)}))}(t);return o?r.a.createElement(Q.Menu,null,n&&r.a.createElement(Q.MenuItem,{icon:"select",text:"Select it",onClick:function(){return a(at(t))}}),t.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.MenuItem,{icon:"double-chevron-up",text:"Add before",onClick:function(){return a(rt(t,0))}}),r.a.createElement(Q.MenuItem,{icon:"double-chevron-down",text:"Add after",onClick:function(){return a(rt(t,1))}})),"tag"===o.type&&xt(a,"Add element",t,"children",o.slots.children),"component"===o.type&&Object.keys(o.slots).map((function(e){return xt(a,"Add element to ".concat(e),t,e,o.slots[e])})),t.length>0&&r.a.createElement(Q.MenuItem,{icon:"delete",text:"Delete"},r.a.createElement(Q.MenuItem,{icon:"thumbs-up",text:"Yes",onClick:function(){return a(function(e){return function(t,n){Object(i.b)((function(){t(A.actions.setActiveNode()),t(T.actions.removeNode(e))}))}}(t))}}))):null}var kt={shadow:"new-object",component:"box",tag:"double-chevron-left"};function _t(e){return"tag"===e.type?"<".concat(e.tag," />"):"component"===e.type?e.component:e.type}function wt(e){var t=e.item,n=e.path,a=Object(i.d)();return r.a.createElement(Q.Popover,{content:r.a.createElement(Ct,{path:n,useSelect:!0}),interactionKind:Q.PopoverInteractionKind.CLICK},r.a.createElement("span",{onMouseOver:function(){return a(ot(n))}},r.a.createElement(Q.Breadcrumb,Object.assign({},t,{className:jt.a.breadCrumb}))))}var Nt=function(e){var t=e.path,n=Object(et.a)(e,["path"]);return r.a.createElement(wt,{item:n,path:t})},Mt=[],Pt=function(e){var t=e.editor;return[t.template,t.vars.activeNodePath||Mt]};function St(){var e=Object(i.e)(Pt,v),t=Object(s.a)(e,2),n=t[0],a=t[1],o=function(e,t){for(var n=[e],a=0;a<t.length;++a){var r=t[a];e=e.slots[r[0]][r[1]],n.push(e)}return n}(n,a).map((function(e,t){var n=a.slice(0,t);return{text:_t(e),icon:kt[e.type],path:n}}));return r.a.createElement("div",{className:jt.a.bottom},r.a.createElement(Q.Breadcrumbs,{items:o,breadcrumbRenderer:Nt,currentBreadcrumbRenderer:Nt}))}var Bt=n(79),At=n.n(Bt);function It(e){var t=e.box,n=e.className,a=Object(i.e)(K);return r.a.createElement("div",{className:n,style:{left:t.left+a.left-1,top:t.top+a.top-1,width:t.width,height:t.height}})}function Ft(e){var t=e.areas,n=e.np,o=e.refs,c=Object(i.e)(K),u=Object(a.useMemo)((function(){if(null===n||void 0===n?void 0:n.node){var e=o.get(n.node.id);if(console.log(n.node,e),e)return g(e.getBoundingClientRect())}}),[n,o,c]);return r.a.createElement(r.a.Fragment,null,u&&r.a.createElement(It,{box:u,className:At.a.selectedBox}),t.map((function(e){return r.a.createElement(It,{box:e.box,className:At.a.blinkBox,key:e.uid})})))}var Tt=function(e){return[(t=e,t.editor.vars.blinkAreas),L(e),U(e)];var t},Ht=r.a.memo((function(){var e=Object(i.e)(Tt,v),t=Object(s.a)(e,3),n=t[0],a=t[1],o=t[2];return"shadow"!==(null===a||void 0===a?void 0:a.node.type)&&r.a.createElement(Ft,{areas:n,np:a,refs:o})}));function Rt(){var e=Object(i.f)(),t=Object(i.e)(W);return Object(a.useEffect)((function(){t&&Promise.resolve().then((function(){var n=t.left,a=t.top,o=t.path;Q.ContextMenu.show(r.a.createElement(i.a,{store:e},r.a.createElement(Ct,{path:o})),{left:n,top:a},(function(){e.dispatch(A.actions.setContextMenu())}))}))}),[t,e]),null}var Lt=n(124),Dt=n.n(Lt),Kt=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).node=r.a.createRef(),e.resizeObserver=new ResizeObserver((function(){e.dispatchCoords()})),e.handleLoad=function(){var t;null===(t=e.getDoc())||void 0===t||t.body.classList.add("_frame_body"),e.forceUpdate()},e.handleMouseLeave=function(){e.props.dispatch(A.actions.removeAllBlinkAreas())},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e,t=this.getDoc();"complete"===(null===t||void 0===t?void 0:t.readyState)?this.handleLoad():null===(e=this.node.current)||void 0===e||e.addEventListener("load",this.handleLoad);this.resizeObserver.observe(this.node.current)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.node.current)||void 0===e||e.removeEventListener("load",this.handleLoad),this.resizeObserver.disconnect()}},{key:"dispatchCoords",value:function(){var e=this.node.current.getBoundingClientRect();this.props.dispatch(A.actions.setIframeCoords(g(e)))}},{key:"getDoc",value:function(){var e;return(null===(e=this.node.current)||void 0===e?void 0:e.contentDocument)||null}},{key:"renderFrameContents",value:function(){var e=this.getDoc();return e?[c.a.createPortal(this.props.head,e.head),c.a.createPortal(this.props.content,e.body)]:null}},{key:"render",value:function(){return r.a.createElement("iframe",{ref:this.node,title:"huitle",className:je()(Dt.a.frame,this.props.className),onMouseLeave:this.handleMouseLeave},this.renderFrameContents())}}]),n}(a.PureComponent),Wt=n(46),Ut=n.n(Wt),zt=function(e){return e.editor.vars.activeShadowContent};function Vt(e){var t=e.item,n=Object(i.d)(),a=Object(i.e)(zt),o=(null===a||void 0===a?void 0:a[0])===t[0]&&a[1]===t[1],c=o?"Click to select":"Click to preview";return r.a.createElement(Q.Tooltip,{content:c},r.a.createElement(Q.Card,{interactive:!0,elevation:o?4:0,className:Ut.a.itemCard,onClick:function(){var e;n(o?function(e,t){var n,a=t(),r=a.editor,o=r.vars,c=r.template,u=a.components,l=o.activeNodePath,s=o.activeShadowContent,d=w(c)+1;if("slot"===s[0]&&(n=function(e){return{id:e,type:"slot",code:"code".concat(e),width:"100px",height:"100px"}}(d)),"tag"===s[0]&&(n=M(d,s[1])),"component"===s[0]){var m=u.components.find((function(e){return e.id===s[1]}));n=P(d,m)}Object(i.b)((function(){e(T.actions.replaceNode([l,n])),e(A.actions.setActiveShadowContent())}))}:(e=t,function(t,n){t(A.actions.setActiveShadowContent(e))}))}},r.a.createElement(Q.Callout,{className:je()(Ut.a.itemInner,o&&"bp3-intent-success")},"tag"===t[0]?"<":"%",t[1])))}var Jt=[["slot"]],Yt=[["tag","div"]];function Gt(){var e=Object(i.e)((function(e){return e.components.components})),t=Object(i.e)((function(e){return e.editor.vars})),n=Object(a.useMemo)((function(){var n="component"===t.document.type,a=n?e.filter((function(e){return e.id!==t.document.id})):e;return[].concat(Object(j.a)(n?Jt:[]),Yt,Object(j.a)(a.map((function(e){return["component",e.id]}))))}),[e,t.document]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ut.a.grid},n.map((function(e){return r.a.createElement(Vt,{item:e,key:e.join(":")})}))))}function qt(){var e=Object(i.e)(D),t=Object(i.e)(L,i.c),n="shadow"===(null===t||void 0===t?void 0:t.node.type);return r.a.createElement("div",{style:{width:e.width/3*2,height:e.height},className:je()(Ut.a.slidePanel,n&&Ut.a.active)},n&&r.a.createElement(Gt,null))}var Qt=function(e){var t;return[R(e),D(e),K(e),"shadow"===(null===(t=L(e))||void 0===t?void 0:t.node.type)]};function Xt(){var e=Object(a.useRef)(),t=Object(i.d)(),n=Object(i.e)(Qt),o=Object(s.a)(n,4),c=o[0],u=o[1],l=o[2],d=o[3],m=Object(a.useMemo)((function(){var e=u.width/3/l.width;return{"--iframe-scale":e,"--iframe-translate":-1*(1-e)/2}}),[u,l]);return Object(a.useEffect)((function(){var n=new ResizeObserver((function(){var n=e.current.getBoundingClientRect();t(A.actions.setMainCoords(g(n)))}));return n.observe(e.current),function(){return n.disconnect()}}),[t,e]),r.a.createElement("div",{className:Ee.a.content,ref:e},r.a.createElement("div",{className:Ee.a.center,style:m},r.a.createElement(Kt,{head:r.a.createElement(Ze,{tree:c}),content:r.a.createElement(Et,{tree:c}),dispatch:t,className:je()(Ee.a.frame,d&&Ee.a.frameMini)}),r.a.createElement(St,null)),r.a.createElement("div",{className:Ee.a.right},r.a.createElement(Ve,null)),r.a.createElement(Ht,null),r.a.createElement(Rt,null),r.a.createElement(qt,null))}var $t=n(80),Zt=n.n($t);function en(){var e=Object(i.d)(),t=Object(i.e)((function(e){return e.components.components}));return r.a.createElement("div",{className:Zt.a.grid},t.map((function(t){return r.a.createElement(Q.Card,{interactive:!0,className:Zt.a.itemCard,key:t.id,onClick:function(){e(he({type:"editor",document:{type:"component",id:t.id}}))}},t.name)})))}var tn=n(81),nn=n.n(tn);function an(){var e=Object(i.d)(),t=Object(i.e)((function(e){return e.pages.pages}));return r.a.createElement("div",{className:nn.a.grid},t.map((function(t){return r.a.createElement(Q.Card,{interactive:!0,className:nn.a.itemCard,key:t.id,onClick:function(){e(he({type:"editor",document:{type:"page",id:t.id}}))}},t.name)})))}function rn(e){switch(e.activity.type){case"components":return r.a.createElement(en,null);case"pages":return r.a.createElement(an,null);case"editor":return r.a.createElement(Xt,null)}}var on=function(e){return[E(e),O(e)]},cn=function(){var e=Object(i.d)(),t=Object(i.e)(on,v),n=Object(s.a)(t,2),a=n[0],o=n[1];return r.a.createElement("div",{className:"bp3-dark ".concat(q.a.app)},r.a.createElement(Q.Navbar,null,r.a.createElement(Q.Navbar.Group,null,r.a.createElement(Q.Navbar.Heading,null,"Mastkloot"),r.a.createElement(Q.Navbar.Divider,null),r.a.createElement(Q.Button,{active:"pages"===a.type,minimal:!0,icon:"document",text:"Pages",onClick:function(){return e(he({type:"pages"}))}}),r.a.createElement(Q.Button,{active:"components"===a.type,minimal:!0,icon:"box",text:"Components",onClick:function(){return e(he({type:"components"}))}}),r.a.createElement(Q.Navbar.Divider,null),o.map((function(t){var n=t.document;return r.a.createElement(Q.Button,{minimal:!0,icon:"database",rightIcon:"cross",active:"editor"===a.type&&f(a.document,n),onClick:function(t){"cross"===t.target.parentNode.dataset.icon?e(function(e){return function(){var t=Object(Z.a)($.a.mark((function t(n,a){var r;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("page"!==(r=a().global.tabs.find((function(t){return f(t.document,e)}))).document.type){t.next=6;break}return t.next=4,ie.pages.update(r.document.id,{template:r.template});case 4:return t.next=6,n(be());case 6:if("component"!==r.document.type){t.next=11;break}return t.next=9,ie.components.update(r.document.id,{template:r.template});case 9:return t.next=11,n(ge());case 11:Object(i.b)((function(){n(me({type:"pages"})),n(ve(r.document))}));case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(n)):e(he({type:"editor",document:n}))},key:"".concat(n.type,":").concat(n.id)},n.id)})))),r.a.createElement(rn,{activity:a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Y.dispatch(be()),Y.dispatch(ge()),c.a.render(r.a.createElement(i.a,{store:Y},r.a.createElement(cn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},45:function(e,t,n){e.exports={content:"Editor_content__1Hy63",frame:"Editor_frame__1YmpD",frameMini:"Editor_frameMini__3Fpft",center:"Editor_center__12CWH",right:"Editor_right__2DHew"}},46:function(e,t,n){e.exports={slidePanel:"SelectComponent_slidePanel__ilGC5",active:"SelectComponent_active__HMmtd",grid:"SelectComponent_grid__axNLB",itemCard:"SelectComponent_itemCard__3Lj1S",itemInner:"SelectComponent_itemInner__2lMob"}},74:function(e,t,n){e.exports={allProps:"CSSPropsEditor_allProps__304z7",propSelect:"CSSPropsEditor_propSelect__3nU8i"}},75:function(e,t,n){e.exports={cell:"Prop_cell__381Ud"}},78:function(e,t,n){e.exports={bottom:"Bottom_bottom__3almA",breadCrumb:"Bottom_breadCrumb__13MV8"}},79:function(e,t,n){e.exports={blinkBox:"Floats_blinkBox__3QTgp",BlinkBoxKF:"Floats_BlinkBoxKF__Mdouj",selectedBox:"Floats_selectedBox__Ery_i"}},80:function(e,t,n){e.exports={grid:"Components_grid__2bbJK",itemCard:"Components_itemCard__Hy6rg"}},81:function(e,t,n){e.exports={grid:"Pages_grid__2KMC7",itemCard:"Pages_itemCard__1xHP8"}}},[[167,1,2]]]);
//# sourceMappingURL=main.a73b650e.chunk.js.map